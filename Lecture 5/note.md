# PDF
## P1
- KKT条件的第三个等式保证任意一个不等式约束要么等同于没有($\lambda_i=0，c_i(x)\le 0$),要么等同于等式约束($c_i(x)=0,\lambda_i>0$)
- 关于stationarity条件的理解：
  - 1. stationarity条件+dual feasibility条件保证取极值处目标函数梯度在各约束梯度方向的投影大于等于0（保持正方向）。
  - 2. 从拉格朗日函数角度考虑，违反dual feasibility约束时，拉格朗日函数将变大，从而有惩罚的效果
## P2-3
- MIT的Atlas就是使用的热启动MPC（活动集）
- 罚函数方法
  - 罚函数方法只有当惩罚系数无穷大时，才能完全满足约束；否则总会得到一些违反约束的解
  - 罚函数本身只能是$C^1$的，Hessian矩阵在约束违反的临界点精度极低（矩阵条件数：最大奇异值与最小奇异值的比。数值分析中指出，我们在计算时一般会损失10的条件数次方的精度（例如浮点数精度大概是16位，如果条件数是5，最后5位数将全是噪声）。而在临界点我们的条件数基本是）
  - 在迭代过程中基于惩罚项进行外循环中的拉格朗日乘子估计（ADMM、增广拉格朗日方法）（以前的课程重点讲了这些）
- 内点法
  - 罚函数在没有违反约束前是不会生效的；而内点法始终会生效，其结果会导致解通常在边界内部
  - 初始解必须在可行域内，否则无定义
  - 适用于控制问题的关键在于能严格控制多少次牛顿不内收敛（且有二次收敛的保证）
  - 内点法的最坏情况也还可以，作为一种解决非线性规划的通用解法。针对具体问题往往可以借助具体背景获得一个足够可行的粗解而帮助更有效解决。但There is no free lunch,追求通用性就容易导致专门问题上解决慢于对专门问题设计（这里往往涉及大量的调整、修改、调参）的算法。
  - 内点法理论保证多项式时间的复杂度解决凸问题
## P3-4
- 关于内点法
  - 松弛：将KKT条件中控制约束项是否考虑的等式进行松弛。，从而避免硬切换的出现
  - 使用牛顿法解决松弛过后的等式时，我们事实上没有考虑KKT条件的另外两个不等式；而如果仅仅用牛顿法解决，只涉及到线性搜索，我们可能冲出可行域，因而此时需要进行回溯(back-tracking)。有很多tricks让他依然很快收敛，但比较繁杂，涉及到比较复杂的一维搜索
- 对数域内点法（22 Frank Permenter）
  - 将不等式约束转化为等式约束
  - 使用带指数的对称换元，同时满足两个KKT条件中的不等式和松弛后的互补等式；从而只要解决一个关于(x和$\sigma$)等式约束
  - QP问题可以有求解器保证以千赫兹频率解决他们
  - 一般来说我们求解最优化问题时都需要正则化和一维搜索（或LMA）